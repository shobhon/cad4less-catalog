{% extends 'base.html' %}
{% block content %}
<h2>Products</h2>

{% if parts %}
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Category</th>
      <th>Brand</th>
      <th>URL</th>
      <th>Price</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  {% for p in parts %}
    <tr>
      <td>{{ p.name }}</td>
      <td>{{ p.category }}</td>
      <td>{{ p.brand or "" }}</td>
      <td>
        {% if p.url %}
          <a href="{{ p.url }}" target="_blank" rel="noopener">Link</a>
        {% endif %}
      </td>
      <td>
        {% if p.price is not none %} ${{ "%.2f"|format(p.price) }} {% endif %}
      </td>
      <td>
        <form method="post" action="{{ url_for('delete_product', part_id=p.id) }}" onsubmit="return confirm('Delete this product?');">
          <button class="btn secondary" type="submit">Delete</button>
        </form>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
<p>No products found. Try <a class="btn" href="{{ url_for('import_catalog') }}">Import CSV</a>.</p>
{% endif %}

<p><a class="btn" href="{{ url_for('import_catalog') }}">Import CSV</a></p>
{% endblock %}