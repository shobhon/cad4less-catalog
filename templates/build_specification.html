{% extends 'base.html' %}

{% block title %}Build Specifications — {{ build.name or 'Build' }}{% endblock %}

{% block content %}
<h2 style="margin-bottom: 0.25rem;">{{ build.name or 'Build' }}</h2>
<div style="color:#666; margin-bottom: 1rem;">
  ID: {{ build.id }}{% if build.created_at %} • Created: {{ build.created_at }}{% endif %}
</div>

{% if build.price is not none %}
<p><strong>Configured Price:</strong> {{ '%.2f'|format(build.price) }}</p>
{% endif %}

{% if groups and groups|length %}
  {% for cat, items in groups %}
    <h4 style="margin-top:1.25rem;">{{ cat }}</h4>
    <table class="table table-striped" style="min-width: 640px;">
      <thead>
        <tr>
          <th style="width:50%;">Part</th>
          <th style="width:10%;">Qty</th>
          <th style="width:20%;">Unit Price</th>
          <th style="width:20%;">Subtotal</th>
        </tr>
      </thead>
      <tbody>
        {% for it in items %}
          <tr>
            <td>{{ it.name }}</td>
            <td>{{ it.qty }}</td>
            <td>
              {% if it.price is not none %}
                {{ '%.2f'|format(it.price) }}
              {% else %}
                —
              {% endif %}
            </td>
            <td>{{ '%.2f'|format(it.subtotal or 0.0) }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endfor %}

  <div style="text-align:right; margin-top: 1rem;">
    <h4>Total: {{ '%.2f'|format(total or 0.0) }}</h4>
  </div>
{% else %}
  <div class="alert alert-info">No parts found for this build.</div>
{% endif %}

<div style="margin-top:1rem;">
  <a class="btn btn-secondary" href="{{ url_for('list_builds') }}">← Back to Builds</a>
</div>
{% endblock %}